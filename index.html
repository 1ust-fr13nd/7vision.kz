<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jetysai Earth Hybrid + Google Street View</title>
    
    <!-- –í—Å–µ —Å—Ç–∏–ª–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ñ–∞–π–ª–µ -->
    <link rel="stylesheet" href="style.css">
    
    <!-- –í–Ω–µ—à–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.160.0/examples/js/controls/OrbitControls.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã -->
    <div id="earth"></div>
    <div id="map"></div>
    <div id="panorama-viewer"></div>
    <div id="editor-overlay"></div>
    
    <!-- UI —ç–ª–µ–º–µ–Ω—Ç—ã -->
    <div id="label">–ñ–µ—Ç—ã—Å–∞–π ¬∑ –¢—É—Ä–∫–µ—Å—Ç–∞–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å ¬∑ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω</div>
    <button id="back-button">‚Üê –ù–∞–∑–∞–¥ –∫ –∫–∞—Ä—Ç–µ</button>
    <button id="select-coords-btn">üìç –í—ã–±—Ä–∞—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã</button>
    <button id="search-streetview-btn">üåç –ü–æ–∏—Å–∫ Street View</button>
    <button id="cache-manager-btn">üíæ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—ç—à–µ–º</button>
    <div id="edit-indicator">‚úèÔ∏è –†–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (Ctrl+Alt+A)</div>

    <!-- –ü–∞–Ω–µ–ª—å —Ä–µ–∂–∏–º–æ–≤ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
    <div id="edit-modes-panel">
        <h3>üéÆ –†–µ–∂–∏–º—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h3>
        <div class="edit-mode-buttons">
            <button class="edit-mode-btn active" id="add-mode-btn">
                <i class="fas fa-plus-circle"></i> –î–æ–±–∞–≤–ª–µ–Ω–∏–µ
            </button>
            <button class="edit-mode-btn" id="edit-mode-btn">
                <i class="fas fa-edit"></i> –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
            </button>
            <button class="edit-mode-btn" id="delete-mode-btn">
                <i class="fas fa-trash"></i> –£–¥–∞–ª–µ–Ω–∏–µ
            </button>
        </div>
    </div>

    <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—ç—à–µ–º -->
    <div id="cache-panel">
        <h3>üíæ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—ç—à–µ–º</h3>
        <button class="cache-btn" id="export-cache-btn">
            <i class="fas fa-download"></i> –°–∫–∞—á–∞—Ç—å –∫—ç—à-—Ñ–∞–π–ª
        </button>
        <button class="cache-btn" id="import-cache-btn">
            <i class="fas fa-upload"></i> –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫—ç—à-—Ñ–∞–π–ª
        </button>
        <button class="cache-btn" id="clear-cache-btn">
            <i class="fas fa-trash"></i> –û—á–∏—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π –∫—ç—à
        </button>
        <div class="cache-info">
            <small>üí° –ö—ç—à-—Ñ–∞–π–ª: <strong>jetysai_panoramas_cache.json</strong><br>
            –§–∞–π–ª —Å–æ–∑–¥–∞–µ—Ç—Å—è —Ä—è–¥–æ–º —Å —ç—Ç–∏–º —Å–∫—Ä–∏–ø—Ç–æ–º</small>
        </div>
    </div>

    <!-- –ü–∞–Ω–µ–ª—å –ø–æ–∏—Å–∫–∞ Street View -->
    <div id="streetview-panel">
        <h3>üåç –ü–æ–∏—Å–∫ Street View</h3>
        <input type="text" class="streetview-search-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –º–µ—Å—Ç–æ –≤ –ñ–µ—Ç—ã—Å–∞–µ..." id="streetview-search-input">
        <div class="streetview-results" id="streetview-results"></div>
        <div class="streetview-info">
            <small>üí° –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø–∞–Ω–æ—Ä–∞–º—ã Google Street View</small>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç -->
    <div id="coords-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üìç –í—ã–±–æ—Ä –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –Ω–∞ –∫–∞—Ä—Ç–µ</h2>
                <p>–ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –∫–∞—Ä—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è, –∑–∞—Ç–µ–º –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –≤—ã–±–æ—Ä</p>
            </div>
            <div class="modal-body">
                <div id="modal-map-container">
                    <div id="modal-map"></div>
                </div>
                <div class="modal-info">
                    <div class="coords-display">
                        <h4>–í—ã–±—Ä–∞–Ω–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã:</h4>
                        <div id="selected-coords">–ù–µ –≤—ã–±—Ä–∞–Ω–æ</div>
                    </div>
                    <div class="coords-instructions">
                        <h4>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:</h4>
                        <ul>
                            <li><strong>–ö–ª–∏–∫–Ω–∏—Ç–µ</strong> –Ω–∞ –∫–∞—Ä—Ç–µ –≤ –Ω—É–∂–Ω–æ–º –º–µ—Å—Ç–µ</li>
                            <li><strong>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ</strong> –º–∞—Ä–∫–µ—Ä –¥–ª—è —Ç–æ—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</li>
                            <li><strong>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–ª–µ—Å–æ –º—ã—à–∏</strong> –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è/—É–º–µ–Ω—å—à–µ–Ω–∏—è</li>
                            <li><strong>–ó–∞–∂–º–∏—Ç–µ –ª–µ–≤—É—é –∫–Ω–æ–ø–∫—É –º—ã—à–∏</strong> –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –ø–æ –∫–∞—Ä—Ç–µ</li>
                            <li><strong>–ù–∞–∂–º–∏—Ç–µ "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å"</strong> –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn" id="cancel-modal-btn">
                    <i class="fas fa-times"></i> –û—Ç–º–µ–Ω–∏—Ç—å
                </button>
                <button class="modal-btn" id="confirm-modal-btn">
                    <i class="fas fa-check"></i> –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≤—ã–±–æ—Ä
                </button>
            </div>
        </div>
    </div>

    <!-- –ö–æ–Ω—Å–æ–ª—å -->
    <div id="editor-console">
        <button class="console-close">√ó</button>
        <div id="console-content"></div>
    </div>
    
    <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <div id="loading">
        <div class="loading-spinner"></div>
        –ó–∞–≥—Ä—É–∑–∫–∞ 3D –ó–µ–º–ª–∏...
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π JavaScript -->
    <script src="script.js"></script>
</body>
</html>